$(document).ready(function(){$(".page1").addClass("visible-block"),$(".hint").fadeOut("fast"),$("#add").focus();var e=0;$("#add").keypress(function(a){$(".hint").fadeOut();var i=a.which;if(13==i){var n=parseInt($("#add").val());if($("#add").val(""),n>99||isNaN(n))$(".hint").fadeIn("slow"),$(".hint").css("display","inline");else{e++;Math.floor(Math.log(e)/Math.LN2);$(".array").append('<p class="element">'+n+"</p>"),1==e&&($(".make-tree").removeClass("invisible"),$(".build-heap").removeClass("invisible"))}return!1}}),$(".make-tree").click(function(){for(var a=[],i=e-1;i>=0;i--){var n=".array p:nth-child("+(i+1)+")";a[i]=$(n).text(),$(n).remove()}for(var i=1;i<=e;i++){var t=Math.floor(Math.log(i)/Math.LN2),o=".row-"+t;if($(o).append('<div class="spot"><p class="element" id="node-'+i+'"">'+a[i-1]+"</p></div>"),e>1){var s="#node-"+Math.floor(i/2),r="#node-"+i;$(r).connections({to:s,within:".rows"})}}$(".make-tree").addClass("invisible"),$(".build-heap").addClass("invisible"),$("#add").addClass("invisible"),$(".hint").remove(),$(".element").connections("update")}),$(".build-heap").click(function(){function a(e){this.heapsize=e.length,this.root=e[0],this.heap=e,i(this)}function i(e){for(var a=Math.floor(e.heapsize/2);a>=1;a--)console.log(a),n(e,a-1)}function n(e,a){var i;i=o(a)<=e.heapsize-1&&e.heap[o(a)]>e.heap[a]?o(a):a,s(a)<=e.heapsize-1&&e.heap[s(a)]>e.heap[i]&&(i=s(a)),i!=a&&(console.log(e.heap[i]+" "+e.heap[a]),t(e.heap,a,i),n(e,i))}function t(e,a,i){var n=e[a];e[a]=e[i],e[i]=n}function o(e){return 2*e+1}function s(e){return 2*e+2}function r(e){return e/2}for(var l=[],d=e-1;d>=0;d--){var h=".array p:nth-child("+(d+1)+")";l[d]=parseInt($(h).text()),$(h).remove()}for(var p=new a(l),d=1;d<=e;d++){var c=Math.floor(Math.log(d)/Math.LN2),v=".row-"+c;if($(v).append('<div class="spot"><p class="element" id="node-'+d+'"">'+p.heap[d-1]+"</p></div>"),e>1){var r="#node-"+Math.floor(d/2),f="#node-"+d;$(f).connections({to:r,within:".rows"})}}$(".build-heap").addClass("invisible"),$(".make-tree").addClass("invisible"),$("#add").addClass("invisible"),$(".hint").remove(),$(".element").connections("update")})});