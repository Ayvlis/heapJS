$(document).ready(function(){function e(e,a){for(var n=[],i=h-1;i>=0;i--){var t=e+" "+a+":nth-child("+(i+1)+")";n[i]=$(t).text()}return $(e).empty(),n}function a(e){for(var a=1;a<=e.length;a++){var n=Math.floor(Math.log(a)/Math.LN2),i=".row-"+n;if($(i).append('<div class="spot"><p class="element" id="node-'+a+'"">'+e[a-1]+"</p></div>"),e.length>1){var t="#node-"+Math.floor(a/2),o="#node-"+a;$(o).connections({to:t,within:".rows"})}}$(".element").connections("update")}function n(e){this.heapsize=e.length,this.root=e[0],this.heap=e,i(this)}function i(e){for(var a=Math.floor(e.heapsize/2);a>=1;a--)console.log(a),t(e,a-1)}function t(e,a){var n;n=r(a)<=e.heapsize-1&&e.heap[r(a)]>e.heap[a]?r(a):a,s(a)<=e.heapsize-1&&e.heap[s(a)]>e.heap[n]&&(n=s(a)),n!=a&&(console.log(e.heap[n]+" "+e.heap[a]),o(e.heap,a,n),t(e,n))}function o(e,a,n){var i=e[a];e[a]=e[n],e[n]=i}function r(e){return 2*e+1}function s(e){return 2*e+2}$("#add").focus();var h=0;$("#add").keypress(function(e){$(".hint").fadeOut();var a=e.which;if(13==a){var n=parseInt($("#add").val());return $("#add").val(""),n>99||isNaN(n)?$(".hint").fadeIn("slow"):(h++,$(".array").append('<p class="element">'+n+"</p>"),1==h&&($(".make-tree").removeClass("invisible"),$(".build-heap").removeClass("invisible"))),!1}}),$(".make-tree").click(function(){$(".page1").addClass("invisible");var n=e(".array","p");a(n)}),$(".build-heap").click(function(){$(".page1").addClass("invisible");var i=new n(e(".array","p"));a(i.heap)})});